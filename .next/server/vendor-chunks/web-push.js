"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/web-push";
exports.ids = ["vendor-chunks/web-push"];
exports.modules = {

/***/ "(rsc)/./node_modules/web-push/src/encryption-helper.js":
/*!********************************************************!*\
  !*** ./node_modules/web-push/src/encryption-helper.js ***!
  \********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst crypto = __webpack_require__(/*! crypto */ \"crypto\");\nconst ece = __webpack_require__(/*! http_ece */ \"(rsc)/./node_modules/http_ece/ece.js\");\n\nconst encrypt = function(userPublicKey, userAuth, payload, contentEncoding) {\n  if (!userPublicKey) {\n    throw new Error('No user public key provided for encryption.');\n  }\n\n  if (typeof userPublicKey !== 'string') {\n    throw new Error('The subscription p256dh value must be a string.');\n  }\n\n  if (Buffer.from(userPublicKey, 'base64url').length !== 65) {\n    throw new Error('The subscription p256dh value should be 65 bytes long.');\n  }\n\n  if (!userAuth) {\n    throw new Error('No user auth provided for encryption.');\n  }\n\n  if (typeof userAuth !== 'string') {\n    throw new Error('The subscription auth key must be a string.');\n  }\n\n  if (Buffer.from(userAuth, 'base64url').length < 16) {\n    throw new Error('The subscription auth key should be at least 16 '\n    + 'bytes long');\n  }\n\n  if (typeof payload !== 'string' && !Buffer.isBuffer(payload)) {\n    throw new Error('Payload must be either a string or a Node Buffer.');\n  }\n\n  if (typeof payload === 'string' || payload instanceof String) {\n    payload = Buffer.from(payload);\n  }\n\n  const localCurve = crypto.createECDH('prime256v1');\n  const localPublicKey = localCurve.generateKeys();\n\n  const salt = crypto.randomBytes(16).toString('base64url');\n\n  const cipherText = ece.encrypt(payload, {\n    version: contentEncoding,\n    dh: userPublicKey,\n    privateKey: localCurve,\n    salt: salt,\n    authSecret: userAuth\n  });\n\n  return {\n    localPublicKey: localPublicKey,\n    salt: salt,\n    cipherText: cipherText\n  };\n};\n\nmodule.exports = {\n  encrypt: encrypt\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvd2ViLXB1c2gvc3JjL2VuY3J5cHRpb24taGVscGVyLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLGVBQWUsbUJBQU8sQ0FBQyxzQkFBUTtBQUMvQixZQUFZLG1CQUFPLENBQUMsc0RBQVU7O0FBRTlCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW52b2ljZS1hcHAvLi9ub2RlX21vZHVsZXMvd2ViLXB1c2gvc3JjL2VuY3J5cHRpb24taGVscGVyLmpzPzc0ZmMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKTtcbmNvbnN0IGVjZSA9IHJlcXVpcmUoJ2h0dHBfZWNlJyk7XG5cbmNvbnN0IGVuY3J5cHQgPSBmdW5jdGlvbih1c2VyUHVibGljS2V5LCB1c2VyQXV0aCwgcGF5bG9hZCwgY29udGVudEVuY29kaW5nKSB7XG4gIGlmICghdXNlclB1YmxpY0tleSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBwdWJsaWMga2V5IHByb3ZpZGVkIGZvciBlbmNyeXB0aW9uLicpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiB1c2VyUHVibGljS2V5ICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBFcnJvcignVGhlIHN1YnNjcmlwdGlvbiBwMjU2ZGggdmFsdWUgbXVzdCBiZSBhIHN0cmluZy4nKTtcbiAgfVxuXG4gIGlmIChCdWZmZXIuZnJvbSh1c2VyUHVibGljS2V5LCAnYmFzZTY0dXJsJykubGVuZ3RoICE9PSA2NSkge1xuICAgIHRocm93IG5ldyBFcnJvcignVGhlIHN1YnNjcmlwdGlvbiBwMjU2ZGggdmFsdWUgc2hvdWxkIGJlIDY1IGJ5dGVzIGxvbmcuJyk7XG4gIH1cblxuICBpZiAoIXVzZXJBdXRoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIGF1dGggcHJvdmlkZWQgZm9yIGVuY3J5cHRpb24uJyk7XG4gIH1cblxuICBpZiAodHlwZW9mIHVzZXJBdXRoICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBFcnJvcignVGhlIHN1YnNjcmlwdGlvbiBhdXRoIGtleSBtdXN0IGJlIGEgc3RyaW5nLicpO1xuICB9XG5cbiAgaWYgKEJ1ZmZlci5mcm9tKHVzZXJBdXRoLCAnYmFzZTY0dXJsJykubGVuZ3RoIDwgMTYpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzdWJzY3JpcHRpb24gYXV0aCBrZXkgc2hvdWxkIGJlIGF0IGxlYXN0IDE2ICdcbiAgICArICdieXRlcyBsb25nJyk7XG4gIH1cblxuICBpZiAodHlwZW9mIHBheWxvYWQgIT09ICdzdHJpbmcnICYmICFCdWZmZXIuaXNCdWZmZXIocGF5bG9hZCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1BheWxvYWQgbXVzdCBiZSBlaXRoZXIgYSBzdHJpbmcgb3IgYSBOb2RlIEJ1ZmZlci4nKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgcGF5bG9hZCA9PT0gJ3N0cmluZycgfHwgcGF5bG9hZCBpbnN0YW5jZW9mIFN0cmluZykge1xuICAgIHBheWxvYWQgPSBCdWZmZXIuZnJvbShwYXlsb2FkKTtcbiAgfVxuXG4gIGNvbnN0IGxvY2FsQ3VydmUgPSBjcnlwdG8uY3JlYXRlRUNESCgncHJpbWUyNTZ2MScpO1xuICBjb25zdCBsb2NhbFB1YmxpY0tleSA9IGxvY2FsQ3VydmUuZ2VuZXJhdGVLZXlzKCk7XG5cbiAgY29uc3Qgc2FsdCA9IGNyeXB0by5yYW5kb21CeXRlcygxNikudG9TdHJpbmcoJ2Jhc2U2NHVybCcpO1xuXG4gIGNvbnN0IGNpcGhlclRleHQgPSBlY2UuZW5jcnlwdChwYXlsb2FkLCB7XG4gICAgdmVyc2lvbjogY29udGVudEVuY29kaW5nLFxuICAgIGRoOiB1c2VyUHVibGljS2V5LFxuICAgIHByaXZhdGVLZXk6IGxvY2FsQ3VydmUsXG4gICAgc2FsdDogc2FsdCxcbiAgICBhdXRoU2VjcmV0OiB1c2VyQXV0aFxuICB9KTtcblxuICByZXR1cm4ge1xuICAgIGxvY2FsUHVibGljS2V5OiBsb2NhbFB1YmxpY0tleSxcbiAgICBzYWx0OiBzYWx0LFxuICAgIGNpcGhlclRleHQ6IGNpcGhlclRleHRcbiAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBlbmNyeXB0OiBlbmNyeXB0XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/web-push/src/encryption-helper.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/web-push/src/index.js":
/*!********************************************!*\
  !*** ./node_modules/web-push/src/index.js ***!
  \********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst vapidHelper = __webpack_require__(/*! ./vapid-helper.js */ \"(rsc)/./node_modules/web-push/src/vapid-helper.js\");\nconst encryptionHelper = __webpack_require__(/*! ./encryption-helper.js */ \"(rsc)/./node_modules/web-push/src/encryption-helper.js\");\nconst WebPushLib = __webpack_require__(/*! ./web-push-lib.js */ \"(rsc)/./node_modules/web-push/src/web-push-lib.js\");\nconst WebPushError = __webpack_require__(/*! ./web-push-error.js */ \"(rsc)/./node_modules/web-push/src/web-push-error.js\");\nconst WebPushConstants = __webpack_require__(/*! ./web-push-constants.js */ \"(rsc)/./node_modules/web-push/src/web-push-constants.js\");\n\nconst webPush = new WebPushLib();\n\nmodule.exports = {\n  WebPushError: WebPushError,\n  supportedContentEncodings: WebPushConstants.supportedContentEncodings,\n  encrypt: encryptionHelper.encrypt,\n  getVapidHeaders: vapidHelper.getVapidHeaders,\n  generateVAPIDKeys: vapidHelper.generateVAPIDKeys,\n  setGCMAPIKey: webPush.setGCMAPIKey,\n  setVapidDetails: webPush.setVapidDetails,\n  generateRequestDetails: webPush.generateRequestDetails,\n  sendNotification: webPush.sendNotification.bind(webPush)\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvd2ViLXB1c2gvc3JjL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLG9CQUFvQixtQkFBTyxDQUFDLDRFQUFtQjtBQUMvQyx5QkFBeUIsbUJBQU8sQ0FBQyxzRkFBd0I7QUFDekQsbUJBQW1CLG1CQUFPLENBQUMsNEVBQW1CO0FBQzlDLHFCQUFxQixtQkFBTyxDQUFDLGdGQUFxQjtBQUNsRCx5QkFBeUIsbUJBQU8sQ0FBQyx3RkFBeUI7O0FBRTFEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbnZvaWNlLWFwcC8uL25vZGVfbW9kdWxlcy93ZWItcHVzaC9zcmMvaW5kZXguanM/YWM2ZCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHZhcGlkSGVscGVyID0gcmVxdWlyZSgnLi92YXBpZC1oZWxwZXIuanMnKTtcbmNvbnN0IGVuY3J5cHRpb25IZWxwZXIgPSByZXF1aXJlKCcuL2VuY3J5cHRpb24taGVscGVyLmpzJyk7XG5jb25zdCBXZWJQdXNoTGliID0gcmVxdWlyZSgnLi93ZWItcHVzaC1saWIuanMnKTtcbmNvbnN0IFdlYlB1c2hFcnJvciA9IHJlcXVpcmUoJy4vd2ViLXB1c2gtZXJyb3IuanMnKTtcbmNvbnN0IFdlYlB1c2hDb25zdGFudHMgPSByZXF1aXJlKCcuL3dlYi1wdXNoLWNvbnN0YW50cy5qcycpO1xuXG5jb25zdCB3ZWJQdXNoID0gbmV3IFdlYlB1c2hMaWIoKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIFdlYlB1c2hFcnJvcjogV2ViUHVzaEVycm9yLFxuICBzdXBwb3J0ZWRDb250ZW50RW5jb2RpbmdzOiBXZWJQdXNoQ29uc3RhbnRzLnN1cHBvcnRlZENvbnRlbnRFbmNvZGluZ3MsXG4gIGVuY3J5cHQ6IGVuY3J5cHRpb25IZWxwZXIuZW5jcnlwdCxcbiAgZ2V0VmFwaWRIZWFkZXJzOiB2YXBpZEhlbHBlci5nZXRWYXBpZEhlYWRlcnMsXG4gIGdlbmVyYXRlVkFQSURLZXlzOiB2YXBpZEhlbHBlci5nZW5lcmF0ZVZBUElES2V5cyxcbiAgc2V0R0NNQVBJS2V5OiB3ZWJQdXNoLnNldEdDTUFQSUtleSxcbiAgc2V0VmFwaWREZXRhaWxzOiB3ZWJQdXNoLnNldFZhcGlkRGV0YWlscyxcbiAgZ2VuZXJhdGVSZXF1ZXN0RGV0YWlsczogd2ViUHVzaC5nZW5lcmF0ZVJlcXVlc3REZXRhaWxzLFxuICBzZW5kTm90aWZpY2F0aW9uOiB3ZWJQdXNoLnNlbmROb3RpZmljYXRpb24uYmluZCh3ZWJQdXNoKVxufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/web-push/src/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/web-push/src/urlsafe-base64-helper.js":
/*!************************************************************!*\
  !*** ./node_modules/web-push/src/urlsafe-base64-helper.js ***!
  \************************************************************/
/***/ ((module) => {

eval("\n\n/**\n * @param {string} base64\n * @returns {boolean}\n */\nfunction validate(base64) {\n  return /^[A-Za-z0-9\\-_]+$/.test(base64);\n}\n\nmodule.exports = {\n  validate: validate\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvd2ViLXB1c2gvc3JjL3VybHNhZmUtYmFzZTY0LWhlbHBlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjtBQUNBLFdBQVcsUUFBUTtBQUNuQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW52b2ljZS1hcHAvLi9ub2RlX21vZHVsZXMvd2ViLXB1c2gvc3JjL3VybHNhZmUtYmFzZTY0LWhlbHBlci5qcz8yMGM5Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZTY0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGUoYmFzZTY0KSB7XG4gIHJldHVybiAvXltBLVphLXowLTlcXC1fXSskLy50ZXN0KGJhc2U2NCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICB2YWxpZGF0ZTogdmFsaWRhdGVcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/web-push/src/urlsafe-base64-helper.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/web-push/src/vapid-helper.js":
/*!***************************************************!*\
  !*** ./node_modules/web-push/src/vapid-helper.js ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst crypto = __webpack_require__(/*! crypto */ \"crypto\");\nconst asn1 = __webpack_require__(/*! asn1.js */ \"(rsc)/./node_modules/asn1.js/lib/asn1.js\");\nconst jws = __webpack_require__(/*! jws */ \"(rsc)/./node_modules/jws/index.js\");\nconst { URL } = __webpack_require__(/*! url */ \"url\");\n\nconst WebPushConstants = __webpack_require__(/*! ./web-push-constants.js */ \"(rsc)/./node_modules/web-push/src/web-push-constants.js\");\nconst urlBase64Helper = __webpack_require__(/*! ./urlsafe-base64-helper */ \"(rsc)/./node_modules/web-push/src/urlsafe-base64-helper.js\");\n\n/**\n * DEFAULT_EXPIRATION is set to seconds in 12 hours\n */\nconst DEFAULT_EXPIRATION_SECONDS = 12 * 60 * 60;\n\n// Maximum expiration is 24 hours according. (See VAPID spec)\nconst MAX_EXPIRATION_SECONDS = 24 * 60 * 60;\n\nconst ECPrivateKeyASN = asn1.define('ECPrivateKey', function() {\n  this.seq().obj(\n    this.key('version').int(),\n    this.key('privateKey').octstr(),\n    this.key('parameters').explicit(0).objid()\n      .optional(),\n    this.key('publicKey').explicit(1).bitstr()\n      .optional()\n  );\n});\n\nfunction toPEM(key) {\n  return ECPrivateKeyASN.encode({\n    version: 1,\n    privateKey: key,\n    parameters: [1, 2, 840, 10045, 3, 1, 7] // prime256v1\n  }, 'pem', {\n    label: 'EC PRIVATE KEY'\n  });\n}\n\nfunction generateVAPIDKeys() {\n  const curve = crypto.createECDH('prime256v1');\n  curve.generateKeys();\n\n  let publicKeyBuffer = curve.getPublicKey();\n  let privateKeyBuffer = curve.getPrivateKey();\n\n  // Occassionally the keys will not be padded to the correct lengh resulting\n  // in errors, hence this padding.\n  // See https://github.com/web-push-libs/web-push/issues/295 for history.\n  if (privateKeyBuffer.length < 32) {\n    const padding = Buffer.alloc(32 - privateKeyBuffer.length);\n    padding.fill(0);\n    privateKeyBuffer = Buffer.concat([padding, privateKeyBuffer]);\n  }\n\n  if (publicKeyBuffer.length < 65) {\n    const padding = Buffer.alloc(65 - publicKeyBuffer.length);\n    padding.fill(0);\n    publicKeyBuffer = Buffer.concat([padding, publicKeyBuffer]);\n  }\n\n  return {\n    publicKey: publicKeyBuffer.toString('base64url'),\n    privateKey: privateKeyBuffer.toString('base64url')\n  };\n}\n\nfunction validateSubject(subject) {\n  if (!subject) {\n    throw new Error('No subject set in vapidDetails.subject.');\n  }\n\n  if (typeof subject !== 'string' || subject.length === 0) {\n    throw new Error('The subject value must be a string containing an https: URL or '\n    + 'mailto: address. ' + subject);\n  }\n\n  let subjectParseResult = null;\n  try {\n    subjectParseResult = new URL(subject);\n  } catch (err) {\n    throw new Error('Vapid subject is not a valid URL. ' + subject);\n  }\n  if (!['https:', 'mailto:'].includes(subjectParseResult.protocol)) {\n    throw new Error('Vapid subject is not an https: or mailto: URL. ' + subject);\n  }\n  if (subjectParseResult.hostname === 'localhost') {\n    console.warn('Vapid subject points to a localhost web URI, which is unsupported by '\n      + 'Apple\\'s push notification server and will result in a BadJwtToken error when '\n      + 'sending notifications.');\n    }\n}\n\nfunction validatePublicKey(publicKey) {\n  if (!publicKey) {\n    throw new Error('No key set vapidDetails.publicKey');\n  }\n\n  if (typeof publicKey !== 'string') {\n    throw new Error('Vapid public key is must be a URL safe Base 64 '\n    + 'encoded string.');\n  }\n\n  if (!urlBase64Helper.validate(publicKey)) {\n    throw new Error('Vapid public key must be a URL safe Base 64 (without \"=\")');\n  }\n\n  publicKey = Buffer.from(publicKey, 'base64url');\n\n  if (publicKey.length !== 65) {\n    throw new Error('Vapid public key should be 65 bytes long when decoded.');\n  }\n}\n\nfunction validatePrivateKey(privateKey) {\n  if (!privateKey) {\n    throw new Error('No key set in vapidDetails.privateKey');\n  }\n\n  if (typeof privateKey !== 'string') {\n    throw new Error('Vapid private key must be a URL safe Base 64 '\n    + 'encoded string.');\n  }\n\n  if (!urlBase64Helper.validate(privateKey)) {\n    throw new Error('Vapid private key must be a URL safe Base 64 (without \"=\")');\n  }\n\n  privateKey = Buffer.from(privateKey, 'base64url');\n\n  if (privateKey.length !== 32) {\n    throw new Error('Vapid private key should be 32 bytes long when decoded.');\n  }\n}\n\n/**\n * Given the number of seconds calculates\n * the expiration in the future by adding the passed `numSeconds`\n * with the current seconds from Unix Epoch\n *\n * @param {Number} numSeconds Number of seconds to be added\n * @return {Number} Future expiration in seconds\n */\nfunction getFutureExpirationTimestamp(numSeconds) {\n  const futureExp = new Date();\n  futureExp.setSeconds(futureExp.getSeconds() + numSeconds);\n  return Math.floor(futureExp.getTime() / 1000);\n}\n\n/**\n * Validates the Expiration Header based on the VAPID Spec\n * Throws error of type `Error` if the expiration is not validated\n *\n * @param {Number} expiration Expiration seconds from Epoch to be validated\n */\nfunction validateExpiration(expiration) {\n  if (!Number.isInteger(expiration)) {\n    throw new Error('`expiration` value must be a number');\n  }\n\n  if (expiration < 0) {\n    throw new Error('`expiration` must be a positive integer');\n  }\n\n  // Roughly checks the time of expiration, since the max expiration can be ahead\n  // of the time than at the moment the expiration was generated\n  const maxExpirationTimestamp = getFutureExpirationTimestamp(MAX_EXPIRATION_SECONDS);\n\n  if (expiration >= maxExpirationTimestamp) {\n    throw new Error('`expiration` value is greater than maximum of 24 hours');\n  }\n}\n\n/**\n * This method takes the required VAPID parameters and returns the required\n * header to be added to a Web Push Protocol Request.\n * @param  {string} audience        This must be the origin of the push service.\n * @param  {string} subject         This should be a URL or a 'mailto:' email\n * address.\n * @param  {string} publicKey       The VAPID public key.\n * @param  {string} privateKey      The VAPID private key.\n * @param  {string} contentEncoding The contentEncoding type.\n * @param  {integer} [expiration]   The expiration of the VAPID JWT.\n * @return {Object}                 Returns an Object with the Authorization and\n * 'Crypto-Key' values to be used as headers.\n */\nfunction getVapidHeaders(audience, subject, publicKey, privateKey, contentEncoding, expiration) {\n  if (!audience) {\n    throw new Error('No audience could be generated for VAPID.');\n  }\n\n  if (typeof audience !== 'string' || audience.length === 0) {\n    throw new Error('The audience value must be a string containing the '\n    + 'origin of a push service. ' + audience);\n  }\n\n  try {\n    new URL(audience); // eslint-disable-line no-new\n  } catch (err) {\n    throw new Error('VAPID audience is not a url. ' + audience);\n  }\n\n  validateSubject(subject);\n  validatePublicKey(publicKey);\n  validatePrivateKey(privateKey);\n\n  privateKey = Buffer.from(privateKey, 'base64url');\n\n  if (expiration) {\n    validateExpiration(expiration);\n  } else {\n    expiration = getFutureExpirationTimestamp(DEFAULT_EXPIRATION_SECONDS);\n  }\n\n  const header = {\n    typ: 'JWT',\n    alg: 'ES256'\n  };\n\n  const jwtPayload = {\n    aud: audience,\n    exp: expiration,\n    sub: subject\n  };\n\n  const jwt = jws.sign({\n    header: header,\n    payload: jwtPayload,\n    privateKey: toPEM(privateKey)\n  });\n\n  if (contentEncoding === WebPushConstants.supportedContentEncodings.AES_128_GCM) {\n    return {\n      Authorization: 'vapid t=' + jwt + ', k=' + publicKey\n    };\n  }\n  if (contentEncoding === WebPushConstants.supportedContentEncodings.AES_GCM) {\n    return {\n      Authorization: 'WebPush ' + jwt,\n      'Crypto-Key': 'p256ecdsa=' + publicKey\n    };\n  }\n\n  throw new Error('Unsupported encoding type specified.');\n}\n\nmodule.exports = {\n  generateVAPIDKeys: generateVAPIDKeys,\n  getFutureExpirationTimestamp: getFutureExpirationTimestamp,\n  getVapidHeaders: getVapidHeaders,\n  validateSubject: validateSubject,\n  validatePublicKey: validatePublicKey,\n  validatePrivateKey: validatePrivateKey,\n  validateExpiration: validateExpiration\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvd2ViLXB1c2gvc3JjL3ZhcGlkLWhlbHBlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixlQUFlLG1CQUFPLENBQUMsc0JBQVE7QUFDL0IsYUFBYSxtQkFBTyxDQUFDLHlEQUFTO0FBQzlCLFlBQVksbUJBQU8sQ0FBQyw4Q0FBSztBQUN6QixRQUFRLE1BQU0sRUFBRSxtQkFBTyxDQUFDLGdCQUFLOztBQUU3Qix5QkFBeUIsbUJBQU8sQ0FBQyx3RkFBeUI7QUFDMUQsd0JBQXdCLG1CQUFPLENBQUMsMkZBQXlCOztBQUV6RDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsWUFBWSxRQUFRO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWSxRQUFRO0FBQ3BCLFlBQVksUUFBUTtBQUNwQjtBQUNBLFlBQVksUUFBUTtBQUNwQixZQUFZLFFBQVE7QUFDcEIsWUFBWSxRQUFRO0FBQ3BCLFlBQVksU0FBUztBQUNyQixZQUFZLHdCQUF3QjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx1QkFBdUI7QUFDdkIsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW52b2ljZS1hcHAvLi9ub2RlX21vZHVsZXMvd2ViLXB1c2gvc3JjL3ZhcGlkLWhlbHBlci5qcz8yZWQxIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuY29uc3QgY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJyk7XG5jb25zdCBhc24xID0gcmVxdWlyZSgnYXNuMS5qcycpO1xuY29uc3QgandzID0gcmVxdWlyZSgnandzJyk7XG5jb25zdCB7IFVSTCB9ID0gcmVxdWlyZSgndXJsJyk7XG5cbmNvbnN0IFdlYlB1c2hDb25zdGFudHMgPSByZXF1aXJlKCcuL3dlYi1wdXNoLWNvbnN0YW50cy5qcycpO1xuY29uc3QgdXJsQmFzZTY0SGVscGVyID0gcmVxdWlyZSgnLi91cmxzYWZlLWJhc2U2NC1oZWxwZXInKTtcblxuLyoqXG4gKiBERUZBVUxUX0VYUElSQVRJT04gaXMgc2V0IHRvIHNlY29uZHMgaW4gMTIgaG91cnNcbiAqL1xuY29uc3QgREVGQVVMVF9FWFBJUkFUSU9OX1NFQ09ORFMgPSAxMiAqIDYwICogNjA7XG5cbi8vIE1heGltdW0gZXhwaXJhdGlvbiBpcyAyNCBob3VycyBhY2NvcmRpbmcuIChTZWUgVkFQSUQgc3BlYylcbmNvbnN0IE1BWF9FWFBJUkFUSU9OX1NFQ09ORFMgPSAyNCAqIDYwICogNjA7XG5cbmNvbnN0IEVDUHJpdmF0ZUtleUFTTiA9IGFzbjEuZGVmaW5lKCdFQ1ByaXZhdGVLZXknLCBmdW5jdGlvbigpIHtcbiAgdGhpcy5zZXEoKS5vYmooXG4gICAgdGhpcy5rZXkoJ3ZlcnNpb24nKS5pbnQoKSxcbiAgICB0aGlzLmtleSgncHJpdmF0ZUtleScpLm9jdHN0cigpLFxuICAgIHRoaXMua2V5KCdwYXJhbWV0ZXJzJykuZXhwbGljaXQoMCkub2JqaWQoKVxuICAgICAgLm9wdGlvbmFsKCksXG4gICAgdGhpcy5rZXkoJ3B1YmxpY0tleScpLmV4cGxpY2l0KDEpLmJpdHN0cigpXG4gICAgICAub3B0aW9uYWwoKVxuICApO1xufSk7XG5cbmZ1bmN0aW9uIHRvUEVNKGtleSkge1xuICByZXR1cm4gRUNQcml2YXRlS2V5QVNOLmVuY29kZSh7XG4gICAgdmVyc2lvbjogMSxcbiAgICBwcml2YXRlS2V5OiBrZXksXG4gICAgcGFyYW1ldGVyczogWzEsIDIsIDg0MCwgMTAwNDUsIDMsIDEsIDddIC8vIHByaW1lMjU2djFcbiAgfSwgJ3BlbScsIHtcbiAgICBsYWJlbDogJ0VDIFBSSVZBVEUgS0VZJ1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVWQVBJREtleXMoKSB7XG4gIGNvbnN0IGN1cnZlID0gY3J5cHRvLmNyZWF0ZUVDREgoJ3ByaW1lMjU2djEnKTtcbiAgY3VydmUuZ2VuZXJhdGVLZXlzKCk7XG5cbiAgbGV0IHB1YmxpY0tleUJ1ZmZlciA9IGN1cnZlLmdldFB1YmxpY0tleSgpO1xuICBsZXQgcHJpdmF0ZUtleUJ1ZmZlciA9IGN1cnZlLmdldFByaXZhdGVLZXkoKTtcblxuICAvLyBPY2Nhc3Npb25hbGx5IHRoZSBrZXlzIHdpbGwgbm90IGJlIHBhZGRlZCB0byB0aGUgY29ycmVjdCBsZW5naCByZXN1bHRpbmdcbiAgLy8gaW4gZXJyb3JzLCBoZW5jZSB0aGlzIHBhZGRpbmcuXG4gIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vd2ViLXB1c2gtbGlicy93ZWItcHVzaC9pc3N1ZXMvMjk1IGZvciBoaXN0b3J5LlxuICBpZiAocHJpdmF0ZUtleUJ1ZmZlci5sZW5ndGggPCAzMikge1xuICAgIGNvbnN0IHBhZGRpbmcgPSBCdWZmZXIuYWxsb2MoMzIgLSBwcml2YXRlS2V5QnVmZmVyLmxlbmd0aCk7XG4gICAgcGFkZGluZy5maWxsKDApO1xuICAgIHByaXZhdGVLZXlCdWZmZXIgPSBCdWZmZXIuY29uY2F0KFtwYWRkaW5nLCBwcml2YXRlS2V5QnVmZmVyXSk7XG4gIH1cblxuICBpZiAocHVibGljS2V5QnVmZmVyLmxlbmd0aCA8IDY1KSB7XG4gICAgY29uc3QgcGFkZGluZyA9IEJ1ZmZlci5hbGxvYyg2NSAtIHB1YmxpY0tleUJ1ZmZlci5sZW5ndGgpO1xuICAgIHBhZGRpbmcuZmlsbCgwKTtcbiAgICBwdWJsaWNLZXlCdWZmZXIgPSBCdWZmZXIuY29uY2F0KFtwYWRkaW5nLCBwdWJsaWNLZXlCdWZmZXJdKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcHVibGljS2V5OiBwdWJsaWNLZXlCdWZmZXIudG9TdHJpbmcoJ2Jhc2U2NHVybCcpLFxuICAgIHByaXZhdGVLZXk6IHByaXZhdGVLZXlCdWZmZXIudG9TdHJpbmcoJ2Jhc2U2NHVybCcpXG4gIH07XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlU3ViamVjdChzdWJqZWN0KSB7XG4gIGlmICghc3ViamVjdCkge1xuICAgIHRocm93IG5ldyBFcnJvcignTm8gc3ViamVjdCBzZXQgaW4gdmFwaWREZXRhaWxzLnN1YmplY3QuJyk7XG4gIH1cblxuICBpZiAodHlwZW9mIHN1YmplY3QgIT09ICdzdHJpbmcnIHx8IHN1YmplY3QubGVuZ3RoID09PSAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgc3ViamVjdCB2YWx1ZSBtdXN0IGJlIGEgc3RyaW5nIGNvbnRhaW5pbmcgYW4gaHR0cHM6IFVSTCBvciAnXG4gICAgKyAnbWFpbHRvOiBhZGRyZXNzLiAnICsgc3ViamVjdCk7XG4gIH1cblxuICBsZXQgc3ViamVjdFBhcnNlUmVzdWx0ID0gbnVsbDtcbiAgdHJ5IHtcbiAgICBzdWJqZWN0UGFyc2VSZXN1bHQgPSBuZXcgVVJMKHN1YmplY3QpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1ZhcGlkIHN1YmplY3QgaXMgbm90IGEgdmFsaWQgVVJMLiAnICsgc3ViamVjdCk7XG4gIH1cbiAgaWYgKCFbJ2h0dHBzOicsICdtYWlsdG86J10uaW5jbHVkZXMoc3ViamVjdFBhcnNlUmVzdWx0LnByb3RvY29sKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignVmFwaWQgc3ViamVjdCBpcyBub3QgYW4gaHR0cHM6IG9yIG1haWx0bzogVVJMLiAnICsgc3ViamVjdCk7XG4gIH1cbiAgaWYgKHN1YmplY3RQYXJzZVJlc3VsdC5ob3N0bmFtZSA9PT0gJ2xvY2FsaG9zdCcpIHtcbiAgICBjb25zb2xlLndhcm4oJ1ZhcGlkIHN1YmplY3QgcG9pbnRzIHRvIGEgbG9jYWxob3N0IHdlYiBVUkksIHdoaWNoIGlzIHVuc3VwcG9ydGVkIGJ5ICdcbiAgICAgICsgJ0FwcGxlXFwncyBwdXNoIG5vdGlmaWNhdGlvbiBzZXJ2ZXIgYW5kIHdpbGwgcmVzdWx0IGluIGEgQmFkSnd0VG9rZW4gZXJyb3Igd2hlbiAnXG4gICAgICArICdzZW5kaW5nIG5vdGlmaWNhdGlvbnMuJyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZVB1YmxpY0tleShwdWJsaWNLZXkpIHtcbiAgaWYgKCFwdWJsaWNLZXkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGtleSBzZXQgdmFwaWREZXRhaWxzLnB1YmxpY0tleScpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBwdWJsaWNLZXkgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdWYXBpZCBwdWJsaWMga2V5IGlzIG11c3QgYmUgYSBVUkwgc2FmZSBCYXNlIDY0ICdcbiAgICArICdlbmNvZGVkIHN0cmluZy4nKTtcbiAgfVxuXG4gIGlmICghdXJsQmFzZTY0SGVscGVyLnZhbGlkYXRlKHB1YmxpY0tleSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1ZhcGlkIHB1YmxpYyBrZXkgbXVzdCBiZSBhIFVSTCBzYWZlIEJhc2UgNjQgKHdpdGhvdXQgXCI9XCIpJyk7XG4gIH1cblxuICBwdWJsaWNLZXkgPSBCdWZmZXIuZnJvbShwdWJsaWNLZXksICdiYXNlNjR1cmwnKTtcblxuICBpZiAocHVibGljS2V5Lmxlbmd0aCAhPT0gNjUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1ZhcGlkIHB1YmxpYyBrZXkgc2hvdWxkIGJlIDY1IGJ5dGVzIGxvbmcgd2hlbiBkZWNvZGVkLicpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlUHJpdmF0ZUtleShwcml2YXRlS2V5KSB7XG4gIGlmICghcHJpdmF0ZUtleSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTm8ga2V5IHNldCBpbiB2YXBpZERldGFpbHMucHJpdmF0ZUtleScpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBwcml2YXRlS2V5ICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBFcnJvcignVmFwaWQgcHJpdmF0ZSBrZXkgbXVzdCBiZSBhIFVSTCBzYWZlIEJhc2UgNjQgJ1xuICAgICsgJ2VuY29kZWQgc3RyaW5nLicpO1xuICB9XG5cbiAgaWYgKCF1cmxCYXNlNjRIZWxwZXIudmFsaWRhdGUocHJpdmF0ZUtleSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1ZhcGlkIHByaXZhdGUga2V5IG11c3QgYmUgYSBVUkwgc2FmZSBCYXNlIDY0ICh3aXRob3V0IFwiPVwiKScpO1xuICB9XG5cbiAgcHJpdmF0ZUtleSA9IEJ1ZmZlci5mcm9tKHByaXZhdGVLZXksICdiYXNlNjR1cmwnKTtcblxuICBpZiAocHJpdmF0ZUtleS5sZW5ndGggIT09IDMyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdWYXBpZCBwcml2YXRlIGtleSBzaG91bGQgYmUgMzIgYnl0ZXMgbG9uZyB3aGVuIGRlY29kZWQuJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBHaXZlbiB0aGUgbnVtYmVyIG9mIHNlY29uZHMgY2FsY3VsYXRlc1xuICogdGhlIGV4cGlyYXRpb24gaW4gdGhlIGZ1dHVyZSBieSBhZGRpbmcgdGhlIHBhc3NlZCBgbnVtU2Vjb25kc2BcbiAqIHdpdGggdGhlIGN1cnJlbnQgc2Vjb25kcyBmcm9tIFVuaXggRXBvY2hcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbnVtU2Vjb25kcyBOdW1iZXIgb2Ygc2Vjb25kcyB0byBiZSBhZGRlZFxuICogQHJldHVybiB7TnVtYmVyfSBGdXR1cmUgZXhwaXJhdGlvbiBpbiBzZWNvbmRzXG4gKi9cbmZ1bmN0aW9uIGdldEZ1dHVyZUV4cGlyYXRpb25UaW1lc3RhbXAobnVtU2Vjb25kcykge1xuICBjb25zdCBmdXR1cmVFeHAgPSBuZXcgRGF0ZSgpO1xuICBmdXR1cmVFeHAuc2V0U2Vjb25kcyhmdXR1cmVFeHAuZ2V0U2Vjb25kcygpICsgbnVtU2Vjb25kcyk7XG4gIHJldHVybiBNYXRoLmZsb29yKGZ1dHVyZUV4cC5nZXRUaW1lKCkgLyAxMDAwKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhlIEV4cGlyYXRpb24gSGVhZGVyIGJhc2VkIG9uIHRoZSBWQVBJRCBTcGVjXG4gKiBUaHJvd3MgZXJyb3Igb2YgdHlwZSBgRXJyb3JgIGlmIHRoZSBleHBpcmF0aW9uIGlzIG5vdCB2YWxpZGF0ZWRcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gZXhwaXJhdGlvbiBFeHBpcmF0aW9uIHNlY29uZHMgZnJvbSBFcG9jaCB0byBiZSB2YWxpZGF0ZWRcbiAqL1xuZnVuY3Rpb24gdmFsaWRhdGVFeHBpcmF0aW9uKGV4cGlyYXRpb24pIHtcbiAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKGV4cGlyYXRpb24pKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdgZXhwaXJhdGlvbmAgdmFsdWUgbXVzdCBiZSBhIG51bWJlcicpO1xuICB9XG5cbiAgaWYgKGV4cGlyYXRpb24gPCAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdgZXhwaXJhdGlvbmAgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXInKTtcbiAgfVxuXG4gIC8vIFJvdWdobHkgY2hlY2tzIHRoZSB0aW1lIG9mIGV4cGlyYXRpb24sIHNpbmNlIHRoZSBtYXggZXhwaXJhdGlvbiBjYW4gYmUgYWhlYWRcbiAgLy8gb2YgdGhlIHRpbWUgdGhhbiBhdCB0aGUgbW9tZW50IHRoZSBleHBpcmF0aW9uIHdhcyBnZW5lcmF0ZWRcbiAgY29uc3QgbWF4RXhwaXJhdGlvblRpbWVzdGFtcCA9IGdldEZ1dHVyZUV4cGlyYXRpb25UaW1lc3RhbXAoTUFYX0VYUElSQVRJT05fU0VDT05EUyk7XG5cbiAgaWYgKGV4cGlyYXRpb24gPj0gbWF4RXhwaXJhdGlvblRpbWVzdGFtcCkge1xuICAgIHRocm93IG5ldyBFcnJvcignYGV4cGlyYXRpb25gIHZhbHVlIGlzIGdyZWF0ZXIgdGhhbiBtYXhpbXVtIG9mIDI0IGhvdXJzJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIG1ldGhvZCB0YWtlcyB0aGUgcmVxdWlyZWQgVkFQSUQgcGFyYW1ldGVycyBhbmQgcmV0dXJucyB0aGUgcmVxdWlyZWRcbiAqIGhlYWRlciB0byBiZSBhZGRlZCB0byBhIFdlYiBQdXNoIFByb3RvY29sIFJlcXVlc3QuXG4gKiBAcGFyYW0gIHtzdHJpbmd9IGF1ZGllbmNlICAgICAgICBUaGlzIG11c3QgYmUgdGhlIG9yaWdpbiBvZiB0aGUgcHVzaCBzZXJ2aWNlLlxuICogQHBhcmFtICB7c3RyaW5nfSBzdWJqZWN0ICAgICAgICAgVGhpcyBzaG91bGQgYmUgYSBVUkwgb3IgYSAnbWFpbHRvOicgZW1haWxcbiAqIGFkZHJlc3MuXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHB1YmxpY0tleSAgICAgICBUaGUgVkFQSUQgcHVibGljIGtleS5cbiAqIEBwYXJhbSAge3N0cmluZ30gcHJpdmF0ZUtleSAgICAgIFRoZSBWQVBJRCBwcml2YXRlIGtleS5cbiAqIEBwYXJhbSAge3N0cmluZ30gY29udGVudEVuY29kaW5nIFRoZSBjb250ZW50RW5jb2RpbmcgdHlwZS5cbiAqIEBwYXJhbSAge2ludGVnZXJ9IFtleHBpcmF0aW9uXSAgIFRoZSBleHBpcmF0aW9uIG9mIHRoZSBWQVBJRCBKV1QuXG4gKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgICAgICAgICAgICBSZXR1cm5zIGFuIE9iamVjdCB3aXRoIHRoZSBBdXRob3JpemF0aW9uIGFuZFxuICogJ0NyeXB0by1LZXknIHZhbHVlcyB0byBiZSB1c2VkIGFzIGhlYWRlcnMuXG4gKi9cbmZ1bmN0aW9uIGdldFZhcGlkSGVhZGVycyhhdWRpZW5jZSwgc3ViamVjdCwgcHVibGljS2V5LCBwcml2YXRlS2V5LCBjb250ZW50RW5jb2RpbmcsIGV4cGlyYXRpb24pIHtcbiAgaWYgKCFhdWRpZW5jZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTm8gYXVkaWVuY2UgY291bGQgYmUgZ2VuZXJhdGVkIGZvciBWQVBJRC4nKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgYXVkaWVuY2UgIT09ICdzdHJpbmcnIHx8IGF1ZGllbmNlLmxlbmd0aCA9PT0gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcignVGhlIGF1ZGllbmNlIHZhbHVlIG11c3QgYmUgYSBzdHJpbmcgY29udGFpbmluZyB0aGUgJ1xuICAgICsgJ29yaWdpbiBvZiBhIHB1c2ggc2VydmljZS4gJyArIGF1ZGllbmNlKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgbmV3IFVSTChhdWRpZW5jZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHRocm93IG5ldyBFcnJvcignVkFQSUQgYXVkaWVuY2UgaXMgbm90IGEgdXJsLiAnICsgYXVkaWVuY2UpO1xuICB9XG5cbiAgdmFsaWRhdGVTdWJqZWN0KHN1YmplY3QpO1xuICB2YWxpZGF0ZVB1YmxpY0tleShwdWJsaWNLZXkpO1xuICB2YWxpZGF0ZVByaXZhdGVLZXkocHJpdmF0ZUtleSk7XG5cbiAgcHJpdmF0ZUtleSA9IEJ1ZmZlci5mcm9tKHByaXZhdGVLZXksICdiYXNlNjR1cmwnKTtcblxuICBpZiAoZXhwaXJhdGlvbikge1xuICAgIHZhbGlkYXRlRXhwaXJhdGlvbihleHBpcmF0aW9uKTtcbiAgfSBlbHNlIHtcbiAgICBleHBpcmF0aW9uID0gZ2V0RnV0dXJlRXhwaXJhdGlvblRpbWVzdGFtcChERUZBVUxUX0VYUElSQVRJT05fU0VDT05EUyk7XG4gIH1cblxuICBjb25zdCBoZWFkZXIgPSB7XG4gICAgdHlwOiAnSldUJyxcbiAgICBhbGc6ICdFUzI1NidcbiAgfTtcblxuICBjb25zdCBqd3RQYXlsb2FkID0ge1xuICAgIGF1ZDogYXVkaWVuY2UsXG4gICAgZXhwOiBleHBpcmF0aW9uLFxuICAgIHN1Yjogc3ViamVjdFxuICB9O1xuXG4gIGNvbnN0IGp3dCA9IGp3cy5zaWduKHtcbiAgICBoZWFkZXI6IGhlYWRlcixcbiAgICBwYXlsb2FkOiBqd3RQYXlsb2FkLFxuICAgIHByaXZhdGVLZXk6IHRvUEVNKHByaXZhdGVLZXkpXG4gIH0pO1xuXG4gIGlmIChjb250ZW50RW5jb2RpbmcgPT09IFdlYlB1c2hDb25zdGFudHMuc3VwcG9ydGVkQ29udGVudEVuY29kaW5ncy5BRVNfMTI4X0dDTSkge1xuICAgIHJldHVybiB7XG4gICAgICBBdXRob3JpemF0aW9uOiAndmFwaWQgdD0nICsgand0ICsgJywgaz0nICsgcHVibGljS2V5XG4gICAgfTtcbiAgfVxuICBpZiAoY29udGVudEVuY29kaW5nID09PSBXZWJQdXNoQ29uc3RhbnRzLnN1cHBvcnRlZENvbnRlbnRFbmNvZGluZ3MuQUVTX0dDTSkge1xuICAgIHJldHVybiB7XG4gICAgICBBdXRob3JpemF0aW9uOiAnV2ViUHVzaCAnICsgand0LFxuICAgICAgJ0NyeXB0by1LZXknOiAncDI1NmVjZHNhPScgKyBwdWJsaWNLZXlcbiAgICB9O1xuICB9XG5cbiAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBlbmNvZGluZyB0eXBlIHNwZWNpZmllZC4nKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGdlbmVyYXRlVkFQSURLZXlzOiBnZW5lcmF0ZVZBUElES2V5cyxcbiAgZ2V0RnV0dXJlRXhwaXJhdGlvblRpbWVzdGFtcDogZ2V0RnV0dXJlRXhwaXJhdGlvblRpbWVzdGFtcCxcbiAgZ2V0VmFwaWRIZWFkZXJzOiBnZXRWYXBpZEhlYWRlcnMsXG4gIHZhbGlkYXRlU3ViamVjdDogdmFsaWRhdGVTdWJqZWN0LFxuICB2YWxpZGF0ZVB1YmxpY0tleTogdmFsaWRhdGVQdWJsaWNLZXksXG4gIHZhbGlkYXRlUHJpdmF0ZUtleTogdmFsaWRhdGVQcml2YXRlS2V5LFxuICB2YWxpZGF0ZUV4cGlyYXRpb246IHZhbGlkYXRlRXhwaXJhdGlvblxufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/web-push/src/vapid-helper.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/web-push/src/web-push-constants.js":
/*!*********************************************************!*\
  !*** ./node_modules/web-push/src/web-push-constants.js ***!
  \*********************************************************/
/***/ ((module) => {

eval("\n\nconst WebPushConstants = {};\n\nWebPushConstants.supportedContentEncodings = {\n  AES_GCM: 'aesgcm',\n  AES_128_GCM: 'aes128gcm'\n};\n\nWebPushConstants.supportedUrgency = {\n  VERY_LOW: 'very-low',\n  LOW: 'low',\n  NORMAL: 'normal',\n  HIGH: 'high'\n};\n\nmodule.exports = WebPushConstants;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvd2ViLXB1c2gvc3JjL3dlYi1wdXNoLWNvbnN0YW50cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbnZvaWNlLWFwcC8uL25vZGVfbW9kdWxlcy93ZWItcHVzaC9zcmMvd2ViLXB1c2gtY29uc3RhbnRzLmpzP2VmNjUiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBXZWJQdXNoQ29uc3RhbnRzID0ge307XG5cbldlYlB1c2hDb25zdGFudHMuc3VwcG9ydGVkQ29udGVudEVuY29kaW5ncyA9IHtcbiAgQUVTX0dDTTogJ2Flc2djbScsXG4gIEFFU18xMjhfR0NNOiAnYWVzMTI4Z2NtJ1xufTtcblxuV2ViUHVzaENvbnN0YW50cy5zdXBwb3J0ZWRVcmdlbmN5ID0ge1xuICBWRVJZX0xPVzogJ3ZlcnktbG93JyxcbiAgTE9XOiAnbG93JyxcbiAgTk9STUFMOiAnbm9ybWFsJyxcbiAgSElHSDogJ2hpZ2gnXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFdlYlB1c2hDb25zdGFudHM7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/web-push/src/web-push-constants.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/web-push/src/web-push-error.js":
/*!*****************************************************!*\
  !*** ./node_modules/web-push/src/web-push-error.js ***!
  \*****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nfunction WebPushError(message, statusCode, headers, body, endpoint) {\n  Error.captureStackTrace(this, this.constructor);\n\n  this.name = this.constructor.name;\n  this.message = message;\n  this.statusCode = statusCode;\n  this.headers = headers;\n  this.body = body;\n  this.endpoint = endpoint;\n}\n\n(__webpack_require__(/*! util */ \"util\").inherits)(WebPushError, Error);\n\nmodule.exports = WebPushError;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvd2ViLXB1c2gvc3JjL3dlYi1wdXNoLWVycm9yLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0RBQXdCOztBQUV4QiIsInNvdXJjZXMiOlsid2VicGFjazovL2ludm9pY2UtYXBwLy4vbm9kZV9tb2R1bGVzL3dlYi1wdXNoL3NyYy93ZWItcHVzaC1lcnJvci5qcz8yMWRhIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gV2ViUHVzaEVycm9yKG1lc3NhZ2UsIHN0YXR1c0NvZGUsIGhlYWRlcnMsIGJvZHksIGVuZHBvaW50KSB7XG4gIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpO1xuXG4gIHRoaXMubmFtZSA9IHRoaXMuY29uc3RydWN0b3IubmFtZTtcbiAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcbiAgdGhpcy5oZWFkZXJzID0gaGVhZGVycztcbiAgdGhpcy5ib2R5ID0gYm9keTtcbiAgdGhpcy5lbmRwb2ludCA9IGVuZHBvaW50O1xufVxuXG5yZXF1aXJlKCd1dGlsJykuaW5oZXJpdHMoV2ViUHVzaEVycm9yLCBFcnJvcik7XG5cbm1vZHVsZS5leHBvcnRzID0gV2ViUHVzaEVycm9yO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/web-push/src/web-push-error.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/web-push/src/web-push-lib.js":
/*!***************************************************!*\
  !*** ./node_modules/web-push/src/web-push-lib.js ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\nconst url = __webpack_require__(/*! url */ \"url\");\nconst https = __webpack_require__(/*! https */ \"https\");\n\nconst WebPushError = __webpack_require__(/*! ./web-push-error.js */ \"(rsc)/./node_modules/web-push/src/web-push-error.js\");\nconst vapidHelper = __webpack_require__(/*! ./vapid-helper.js */ \"(rsc)/./node_modules/web-push/src/vapid-helper.js\");\nconst encryptionHelper = __webpack_require__(/*! ./encryption-helper.js */ \"(rsc)/./node_modules/web-push/src/encryption-helper.js\");\nconst webPushConstants = __webpack_require__(/*! ./web-push-constants.js */ \"(rsc)/./node_modules/web-push/src/web-push-constants.js\");\nconst urlBase64Helper = __webpack_require__(/*! ./urlsafe-base64-helper */ \"(rsc)/./node_modules/web-push/src/urlsafe-base64-helper.js\");\n\n// Default TTL is four weeks.\nconst DEFAULT_TTL = 2419200;\n\nlet gcmAPIKey = '';\nlet vapidDetails;\n\nfunction WebPushLib() {\n\n}\n\n/**\n * When sending messages to a GCM endpoint you need to set the GCM API key\n * by either calling setGMAPIKey() or passing in the API key as an option\n * to sendNotification().\n * @param  {string} apiKey The API key to send with the GCM request.\n */\nWebPushLib.prototype.setGCMAPIKey = function(apiKey) {\n  if (apiKey === null) {\n    gcmAPIKey = null;\n    return;\n  }\n\n  if (typeof apiKey === 'undefined'\n  || typeof apiKey !== 'string'\n  || apiKey.length === 0) {\n    throw new Error('The GCM API Key should be a non-empty string or null.');\n  }\n\n  gcmAPIKey = apiKey;\n};\n\n/**\n * When making requests where you want to define VAPID details, call this\n * method before sendNotification() or pass in the details and options to\n * sendNotification.\n * @param  {string} subject    This must be either a URL or a 'mailto:'\n * address. For example: 'https://my-site.com/contact' or\n * 'mailto: contact@my-site.com'\n * @param  {string} publicKey  The public VAPID key, a URL safe, base64 encoded string\n * @param  {string} privateKey The private VAPID key, a URL safe, base64 encoded string.\n */\nWebPushLib.prototype.setVapidDetails = function(subject, publicKey, privateKey) {\n    if (arguments.length === 1 && arguments[0] === null) {\n      vapidDetails = null;\n      return;\n    }\n\n    vapidHelper.validateSubject(subject);\n    vapidHelper.validatePublicKey(publicKey);\n    vapidHelper.validatePrivateKey(privateKey);\n\n    vapidDetails = {\n      subject: subject,\n      publicKey: publicKey,\n      privateKey: privateKey\n    };\n  };\n\n  /**\n   * To get the details of a request to trigger a push message, without sending\n   * a push notification call this method.\n   *\n   * This method will throw an error if there is an issue with the input.\n   * @param  {PushSubscription} subscription The PushSubscription you wish to\n   * send the notification to.\n   * @param  {string|Buffer} [payload]       The payload you wish to send to the\n   * the user.\n   * @param  {Object} [options]              Options for the GCM API key and\n   * vapid keys can be passed in if they are unique for each notification you\n   * wish to send.\n   * @return {Object}                       This method returns an Object which\n   * contains 'endpoint', 'method', 'headers' and 'payload'.\n   */\nWebPushLib.prototype.generateRequestDetails = function(subscription, payload, options) {\n    if (!subscription || !subscription.endpoint) {\n      throw new Error('You must pass in a subscription with at least '\n      + 'an endpoint.');\n    }\n\n    if (typeof subscription.endpoint !== 'string'\n    || subscription.endpoint.length === 0) {\n      throw new Error('The subscription endpoint must be a string with '\n      + 'a valid URL.');\n    }\n\n    if (payload) {\n      // Validate the subscription keys\n      if (typeof subscription !== 'object' || !subscription.keys\n      || !subscription.keys.p256dh\n      || !subscription.keys.auth) {\n        throw new Error('To send a message with a payload, the '\n        + 'subscription must have \\'auth\\' and \\'p256dh\\' keys.');\n      }\n    }\n\n    let currentGCMAPIKey = gcmAPIKey;\n    let currentVapidDetails = vapidDetails;\n    let timeToLive = DEFAULT_TTL;\n    let extraHeaders = {};\n    let contentEncoding = webPushConstants.supportedContentEncodings.AES_128_GCM;\n    let urgency = webPushConstants.supportedUrgency.NORMAL;\n    let topic;\n    let proxy;\n    let agent;\n    let timeout;\n\n    if (options) {\n      const validOptionKeys = [\n        'headers',\n        'gcmAPIKey',\n        'vapidDetails',\n        'TTL',\n        'contentEncoding',\n        'urgency',\n        'topic',\n        'proxy',\n        'agent',\n        'timeout'\n      ];\n      const optionKeys = Object.keys(options);\n      for (let i = 0; i < optionKeys.length; i += 1) {\n        const optionKey = optionKeys[i];\n        if (!validOptionKeys.includes(optionKey)) {\n          throw new Error('\\'' + optionKey + '\\' is an invalid option. '\n          + 'The valid options are [\\'' + validOptionKeys.join('\\', \\'')\n          + '\\'].');\n        }\n      }\n\n      if (options.headers) {\n        extraHeaders = options.headers;\n        let duplicates = Object.keys(extraHeaders)\n            .filter(function (header) {\n              return typeof options[header] !== 'undefined';\n            });\n\n        if (duplicates.length > 0) {\n          throw new Error('Duplicated headers defined ['\n          + duplicates.join(',') + ']. Please either define the header in the'\n          + 'top level options OR in the \\'headers\\' key.');\n        }\n      }\n\n      if (options.gcmAPIKey) {\n        currentGCMAPIKey = options.gcmAPIKey;\n      }\n\n      // Falsy values are allowed here so one can skip Vapid `else if` below and use FCM\n      if (options.vapidDetails !== undefined) {\n        currentVapidDetails = options.vapidDetails;\n      }\n\n      if (options.TTL !== undefined) {\n        timeToLive = Number(options.TTL);\n        if (timeToLive < 0) {\n          throw new Error('TTL should be a number and should be at least 0');\n        }\n      }\n\n      if (options.contentEncoding) {\n        if ((options.contentEncoding === webPushConstants.supportedContentEncodings.AES_128_GCM\n          || options.contentEncoding === webPushConstants.supportedContentEncodings.AES_GCM)) {\n          contentEncoding = options.contentEncoding;\n        } else {\n          throw new Error('Unsupported content encoding specified.');\n        }\n      }\n\n      if (options.urgency) {\n        if ((options.urgency === webPushConstants.supportedUrgency.VERY_LOW\n          || options.urgency === webPushConstants.supportedUrgency.LOW\n          || options.urgency === webPushConstants.supportedUrgency.NORMAL\n          || options.urgency === webPushConstants.supportedUrgency.HIGH)) {\n          urgency = options.urgency;\n        } else {\n          throw new Error('Unsupported urgency specified.');\n        }\n      }\n\n      if (options.topic) {\n        if (!urlBase64Helper.validate(options.topic)) {\n          throw new Error('Unsupported characters set use the URL or filename-safe Base64 characters set');\n        }\n        if (options.topic.length > 32) {\n          throw new Error('use maximum of 32 characters from the URL or filename-safe Base64 characters set');\n        }\n        topic = options.topic;\n      }\n\n      if (options.proxy) {\n        if (typeof options.proxy === 'string'\n          || typeof options.proxy.host === 'string') {\n          proxy = options.proxy;\n        } else {\n          console.warn('Attempt to use proxy option, but invalid type it should be a string or proxy options object.');\n        }\n      }\n\n      if (options.agent) {\n        if (options.agent instanceof https.Agent) {\n          if (proxy) {\n            console.warn('Agent option will be ignored because proxy option is defined.');\n          }\n\n          agent = options.agent;\n        } else {\n          console.warn('Wrong type for the agent option, it should be an instance of https.Agent.');\n        }\n      }\n\n      if (typeof options.timeout === 'number') {\n        timeout = options.timeout;\n      }\n    }\n\n    if (typeof timeToLive === 'undefined') {\n      timeToLive = DEFAULT_TTL;\n    }\n\n    const requestDetails = {\n      method: 'POST',\n      headers: {\n        TTL: timeToLive\n      }\n    };\n    Object.keys(extraHeaders).forEach(function (header) {\n      requestDetails.headers[header] = extraHeaders[header];\n    });\n    let requestPayload = null;\n\n    if (payload) {\n      const encrypted = encryptionHelper\n        .encrypt(subscription.keys.p256dh, subscription.keys.auth, payload, contentEncoding);\n\n      requestDetails.headers['Content-Length'] = encrypted.cipherText.length;\n      requestDetails.headers['Content-Type'] = 'application/octet-stream';\n\n      if (contentEncoding === webPushConstants.supportedContentEncodings.AES_128_GCM) {\n        requestDetails.headers['Content-Encoding'] = webPushConstants.supportedContentEncodings.AES_128_GCM;\n      } else if (contentEncoding === webPushConstants.supportedContentEncodings.AES_GCM) {\n        requestDetails.headers['Content-Encoding'] = webPushConstants.supportedContentEncodings.AES_GCM;\n        requestDetails.headers.Encryption = 'salt=' + encrypted.salt;\n        requestDetails.headers['Crypto-Key'] = 'dh=' + encrypted.localPublicKey.toString('base64url');\n      }\n\n      requestPayload = encrypted.cipherText;\n    } else {\n      requestDetails.headers['Content-Length'] = 0;\n    }\n\n    const isGCM = subscription.endpoint.startsWith('https://android.googleapis.com/gcm/send');\n    const isFCM = subscription.endpoint.startsWith('https://fcm.googleapis.com/fcm/send');\n    // VAPID isn't supported by GCM hence the if, else if.\n    if (isGCM) {\n      if (!currentGCMAPIKey) {\n        console.warn('Attempt to send push notification to GCM endpoint, '\n        + 'but no GCM key is defined. Please use setGCMApiKey() or add '\n        + '\\'gcmAPIKey\\' as an option.');\n      } else {\n        requestDetails.headers.Authorization = 'key=' + currentGCMAPIKey;\n      }\n    } else if (currentVapidDetails) {\n      const parsedUrl = url.parse(subscription.endpoint);\n      const audience = parsedUrl.protocol + '//'\n      + parsedUrl.host;\n\n      const vapidHeaders = vapidHelper.getVapidHeaders(\n        audience,\n        currentVapidDetails.subject,\n        currentVapidDetails.publicKey,\n        currentVapidDetails.privateKey,\n        contentEncoding\n      );\n\n      requestDetails.headers.Authorization = vapidHeaders.Authorization;\n\n      if (contentEncoding === webPushConstants.supportedContentEncodings.AES_GCM) {\n        if (requestDetails.headers['Crypto-Key']) {\n          requestDetails.headers['Crypto-Key'] += ';'\n          + vapidHeaders['Crypto-Key'];\n        } else {\n          requestDetails.headers['Crypto-Key'] = vapidHeaders['Crypto-Key'];\n        }\n      }\n    } else if (isFCM && currentGCMAPIKey) {\n      requestDetails.headers.Authorization = 'key=' + currentGCMAPIKey;\n    }\n\n    requestDetails.headers.Urgency = urgency;\n\n    if (topic) {\n      requestDetails.headers.Topic = topic;\n    }\n\n    requestDetails.body = requestPayload;\n    requestDetails.endpoint = subscription.endpoint;\n\n    if (proxy) {\n      requestDetails.proxy = proxy;\n    }\n\n    if (agent) {\n      requestDetails.agent = agent;\n    }\n\n    if (timeout) {\n      requestDetails.timeout = timeout;\n    }\n\n    return requestDetails;\n  };\n\n/**\n * To send a push notification call this method with a subscription, optional\n * payload and any options.\n * @param  {PushSubscription} subscription The PushSubscription you wish to\n * send the notification to.\n * @param  {string|Buffer} [payload]       The payload you wish to send to the\n * the user.\n * @param  {Object} [options]              Options for the GCM API key and\n * vapid keys can be passed in if they are unique for each notification you\n * wish to send.\n * @return {Promise}                       This method returns a Promise which\n * resolves if the sending of the notification was successful, otherwise it\n * rejects.\n */\nWebPushLib.prototype.sendNotification = function(subscription, payload, options) {\n    let requestDetails;\n    try {\n      requestDetails = this.generateRequestDetails(subscription, payload, options);\n    } catch (err) {\n      return Promise.reject(err);\n    }\n\n    return new Promise(function(resolve, reject) {\n      const httpsOptions = {};\n      const urlParts = url.parse(requestDetails.endpoint);\n      httpsOptions.hostname = urlParts.hostname;\n      httpsOptions.port = urlParts.port;\n      httpsOptions.path = urlParts.path;\n\n      httpsOptions.headers = requestDetails.headers;\n      httpsOptions.method = requestDetails.method;\n\n      if (requestDetails.timeout) {\n        httpsOptions.timeout = requestDetails.timeout;\n      }\n\n      if (requestDetails.agent) {\n        httpsOptions.agent = requestDetails.agent;\n      }\n\n      if (requestDetails.proxy) {\n        const { HttpsProxyAgent } = __webpack_require__(/*! https-proxy-agent */ \"(rsc)/./node_modules/https-proxy-agent/dist/index.js\"); // eslint-disable-line global-require\n        httpsOptions.agent = new HttpsProxyAgent(requestDetails.proxy);\n      }\n\n      const pushRequest = https.request(httpsOptions, function(pushResponse) {\n        let responseText = '';\n\n        pushResponse.on('data', function(chunk) {\n          responseText += chunk;\n        });\n\n        pushResponse.on('end', function() {\n          if (pushResponse.statusCode < 200 || pushResponse.statusCode > 299) {\n            reject(new WebPushError(\n              'Received unexpected response code',\n              pushResponse.statusCode,\n              pushResponse.headers,\n              responseText,\n              requestDetails.endpoint\n            ));\n          } else {\n            resolve({\n              statusCode: pushResponse.statusCode,\n              body: responseText,\n              headers: pushResponse.headers\n            });\n          }\n        });\n      });\n\n      if (requestDetails.timeout) {\n        pushRequest.on('timeout', function() {\n          pushRequest.destroy(new Error('Socket timeout'));\n        });\n      }\n\n      pushRequest.on('error', function(e) {\n        reject(e);\n      });\n\n      if (requestDetails.body) {\n        pushRequest.write(requestDetails.body);\n      }\n\n      pushRequest.end();\n    });\n  };\n\nmodule.exports = WebPushLib;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvd2ViLXB1c2gvc3JjL3dlYi1wdXNoLWxpYi5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixZQUFZLG1CQUFPLENBQUMsZ0JBQUs7QUFDekIsY0FBYyxtQkFBTyxDQUFDLG9CQUFPOztBQUU3QixxQkFBcUIsbUJBQU8sQ0FBQyxnRkFBcUI7QUFDbEQsb0JBQW9CLG1CQUFPLENBQUMsNEVBQW1CO0FBQy9DLHlCQUF5QixtQkFBTyxDQUFDLHNGQUF3QjtBQUN6RCx5QkFBeUIsbUJBQU8sQ0FBQyx3RkFBeUI7QUFDMUQsd0JBQXdCLG1CQUFPLENBQUMsMkZBQXlCOztBQUV6RDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFFBQVE7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksUUFBUTtBQUNwQjtBQUNBO0FBQ0EsWUFBWSxRQUFRO0FBQ3BCLFlBQVksUUFBUTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxrQkFBa0I7QUFDaEM7QUFDQSxjQUFjLGVBQWU7QUFDN0I7QUFDQSxjQUFjLFFBQVE7QUFDdEI7QUFDQTtBQUNBLGNBQWMsOEJBQThCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsdUJBQXVCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLG9EQUFvRDtBQUNwRDtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVksa0JBQWtCO0FBQzlCO0FBQ0EsWUFBWSxlQUFlO0FBQzNCO0FBQ0EsWUFBWSxRQUFRO0FBQ3BCO0FBQ0E7QUFDQSxZQUFZLCtCQUErQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxnQkFBZ0Isa0JBQWtCLEVBQUUsbUJBQU8sQ0FBQywrRUFBbUIsR0FBRztBQUNsRTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNULE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL2ludm9pY2UtYXBwLy4vbm9kZV9tb2R1bGVzL3dlYi1wdXNoL3NyYy93ZWItcHVzaC1saWIuanM/MGRhMCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHVybCA9IHJlcXVpcmUoJ3VybCcpO1xuY29uc3QgaHR0cHMgPSByZXF1aXJlKCdodHRwcycpO1xuXG5jb25zdCBXZWJQdXNoRXJyb3IgPSByZXF1aXJlKCcuL3dlYi1wdXNoLWVycm9yLmpzJyk7XG5jb25zdCB2YXBpZEhlbHBlciA9IHJlcXVpcmUoJy4vdmFwaWQtaGVscGVyLmpzJyk7XG5jb25zdCBlbmNyeXB0aW9uSGVscGVyID0gcmVxdWlyZSgnLi9lbmNyeXB0aW9uLWhlbHBlci5qcycpO1xuY29uc3Qgd2ViUHVzaENvbnN0YW50cyA9IHJlcXVpcmUoJy4vd2ViLXB1c2gtY29uc3RhbnRzLmpzJyk7XG5jb25zdCB1cmxCYXNlNjRIZWxwZXIgPSByZXF1aXJlKCcuL3VybHNhZmUtYmFzZTY0LWhlbHBlcicpO1xuXG4vLyBEZWZhdWx0IFRUTCBpcyBmb3VyIHdlZWtzLlxuY29uc3QgREVGQVVMVF9UVEwgPSAyNDE5MjAwO1xuXG5sZXQgZ2NtQVBJS2V5ID0gJyc7XG5sZXQgdmFwaWREZXRhaWxzO1xuXG5mdW5jdGlvbiBXZWJQdXNoTGliKCkge1xuXG59XG5cbi8qKlxuICogV2hlbiBzZW5kaW5nIG1lc3NhZ2VzIHRvIGEgR0NNIGVuZHBvaW50IHlvdSBuZWVkIHRvIHNldCB0aGUgR0NNIEFQSSBrZXlcbiAqIGJ5IGVpdGhlciBjYWxsaW5nIHNldEdNQVBJS2V5KCkgb3IgcGFzc2luZyBpbiB0aGUgQVBJIGtleSBhcyBhbiBvcHRpb25cbiAqIHRvIHNlbmROb3RpZmljYXRpb24oKS5cbiAqIEBwYXJhbSAge3N0cmluZ30gYXBpS2V5IFRoZSBBUEkga2V5IHRvIHNlbmQgd2l0aCB0aGUgR0NNIHJlcXVlc3QuXG4gKi9cbldlYlB1c2hMaWIucHJvdG90eXBlLnNldEdDTUFQSUtleSA9IGZ1bmN0aW9uKGFwaUtleSkge1xuICBpZiAoYXBpS2V5ID09PSBudWxsKSB7XG4gICAgZ2NtQVBJS2V5ID0gbnVsbDtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAodHlwZW9mIGFwaUtleSA9PT0gJ3VuZGVmaW5lZCdcbiAgfHwgdHlwZW9mIGFwaUtleSAhPT0gJ3N0cmluZydcbiAgfHwgYXBpS2V5Lmxlbmd0aCA9PT0gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcignVGhlIEdDTSBBUEkgS2V5IHNob3VsZCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcgb3IgbnVsbC4nKTtcbiAgfVxuXG4gIGdjbUFQSUtleSA9IGFwaUtleTtcbn07XG5cbi8qKlxuICogV2hlbiBtYWtpbmcgcmVxdWVzdHMgd2hlcmUgeW91IHdhbnQgdG8gZGVmaW5lIFZBUElEIGRldGFpbHMsIGNhbGwgdGhpc1xuICogbWV0aG9kIGJlZm9yZSBzZW5kTm90aWZpY2F0aW9uKCkgb3IgcGFzcyBpbiB0aGUgZGV0YWlscyBhbmQgb3B0aW9ucyB0b1xuICogc2VuZE5vdGlmaWNhdGlvbi5cbiAqIEBwYXJhbSAge3N0cmluZ30gc3ViamVjdCAgICBUaGlzIG11c3QgYmUgZWl0aGVyIGEgVVJMIG9yIGEgJ21haWx0bzonXG4gKiBhZGRyZXNzLiBGb3IgZXhhbXBsZTogJ2h0dHBzOi8vbXktc2l0ZS5jb20vY29udGFjdCcgb3JcbiAqICdtYWlsdG86IGNvbnRhY3RAbXktc2l0ZS5jb20nXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHB1YmxpY0tleSAgVGhlIHB1YmxpYyBWQVBJRCBrZXksIGEgVVJMIHNhZmUsIGJhc2U2NCBlbmNvZGVkIHN0cmluZ1xuICogQHBhcmFtICB7c3RyaW5nfSBwcml2YXRlS2V5IFRoZSBwcml2YXRlIFZBUElEIGtleSwgYSBVUkwgc2FmZSwgYmFzZTY0IGVuY29kZWQgc3RyaW5nLlxuICovXG5XZWJQdXNoTGliLnByb3RvdHlwZS5zZXRWYXBpZERldGFpbHMgPSBmdW5jdGlvbihzdWJqZWN0LCBwdWJsaWNLZXksIHByaXZhdGVLZXkpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSAmJiBhcmd1bWVudHNbMF0gPT09IG51bGwpIHtcbiAgICAgIHZhcGlkRGV0YWlscyA9IG51bGw7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFwaWRIZWxwZXIudmFsaWRhdGVTdWJqZWN0KHN1YmplY3QpO1xuICAgIHZhcGlkSGVscGVyLnZhbGlkYXRlUHVibGljS2V5KHB1YmxpY0tleSk7XG4gICAgdmFwaWRIZWxwZXIudmFsaWRhdGVQcml2YXRlS2V5KHByaXZhdGVLZXkpO1xuXG4gICAgdmFwaWREZXRhaWxzID0ge1xuICAgICAgc3ViamVjdDogc3ViamVjdCxcbiAgICAgIHB1YmxpY0tleTogcHVibGljS2V5LFxuICAgICAgcHJpdmF0ZUtleTogcHJpdmF0ZUtleVxuICAgIH07XG4gIH07XG5cbiAgLyoqXG4gICAqIFRvIGdldCB0aGUgZGV0YWlscyBvZiBhIHJlcXVlc3QgdG8gdHJpZ2dlciBhIHB1c2ggbWVzc2FnZSwgd2l0aG91dCBzZW5kaW5nXG4gICAqIGEgcHVzaCBub3RpZmljYXRpb24gY2FsbCB0aGlzIG1ldGhvZC5cbiAgICpcbiAgICogVGhpcyBtZXRob2Qgd2lsbCB0aHJvdyBhbiBlcnJvciBpZiB0aGVyZSBpcyBhbiBpc3N1ZSB3aXRoIHRoZSBpbnB1dC5cbiAgICogQHBhcmFtICB7UHVzaFN1YnNjcmlwdGlvbn0gc3Vic2NyaXB0aW9uIFRoZSBQdXNoU3Vic2NyaXB0aW9uIHlvdSB3aXNoIHRvXG4gICAqIHNlbmQgdGhlIG5vdGlmaWNhdGlvbiB0by5cbiAgICogQHBhcmFtICB7c3RyaW5nfEJ1ZmZlcn0gW3BheWxvYWRdICAgICAgIFRoZSBwYXlsb2FkIHlvdSB3aXNoIHRvIHNlbmQgdG8gdGhlXG4gICAqIHRoZSB1c2VyLlxuICAgKiBAcGFyYW0gIHtPYmplY3R9IFtvcHRpb25zXSAgICAgICAgICAgICAgT3B0aW9ucyBmb3IgdGhlIEdDTSBBUEkga2V5IGFuZFxuICAgKiB2YXBpZCBrZXlzIGNhbiBiZSBwYXNzZWQgaW4gaWYgdGhleSBhcmUgdW5pcXVlIGZvciBlYWNoIG5vdGlmaWNhdGlvbiB5b3VcbiAgICogd2lzaCB0byBzZW5kLlxuICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgICAgICAgICAgICAgICAgICBUaGlzIG1ldGhvZCByZXR1cm5zIGFuIE9iamVjdCB3aGljaFxuICAgKiBjb250YWlucyAnZW5kcG9pbnQnLCAnbWV0aG9kJywgJ2hlYWRlcnMnIGFuZCAncGF5bG9hZCcuXG4gICAqL1xuV2ViUHVzaExpYi5wcm90b3R5cGUuZ2VuZXJhdGVSZXF1ZXN0RGV0YWlscyA9IGZ1bmN0aW9uKHN1YnNjcmlwdGlvbiwgcGF5bG9hZCwgb3B0aW9ucykge1xuICAgIGlmICghc3Vic2NyaXB0aW9uIHx8ICFzdWJzY3JpcHRpb24uZW5kcG9pbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignWW91IG11c3QgcGFzcyBpbiBhIHN1YnNjcmlwdGlvbiB3aXRoIGF0IGxlYXN0ICdcbiAgICAgICsgJ2FuIGVuZHBvaW50LicpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygc3Vic2NyaXB0aW9uLmVuZHBvaW50ICE9PSAnc3RyaW5nJ1xuICAgIHx8IHN1YnNjcmlwdGlvbi5lbmRwb2ludC5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHN1YnNjcmlwdGlvbiBlbmRwb2ludCBtdXN0IGJlIGEgc3RyaW5nIHdpdGggJ1xuICAgICAgKyAnYSB2YWxpZCBVUkwuJyk7XG4gICAgfVxuXG4gICAgaWYgKHBheWxvYWQpIHtcbiAgICAgIC8vIFZhbGlkYXRlIHRoZSBzdWJzY3JpcHRpb24ga2V5c1xuICAgICAgaWYgKHR5cGVvZiBzdWJzY3JpcHRpb24gIT09ICdvYmplY3QnIHx8ICFzdWJzY3JpcHRpb24ua2V5c1xuICAgICAgfHwgIXN1YnNjcmlwdGlvbi5rZXlzLnAyNTZkaFxuICAgICAgfHwgIXN1YnNjcmlwdGlvbi5rZXlzLmF1dGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUbyBzZW5kIGEgbWVzc2FnZSB3aXRoIGEgcGF5bG9hZCwgdGhlICdcbiAgICAgICAgKyAnc3Vic2NyaXB0aW9uIG11c3QgaGF2ZSBcXCdhdXRoXFwnIGFuZCBcXCdwMjU2ZGhcXCcga2V5cy4nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgY3VycmVudEdDTUFQSUtleSA9IGdjbUFQSUtleTtcbiAgICBsZXQgY3VycmVudFZhcGlkRGV0YWlscyA9IHZhcGlkRGV0YWlscztcbiAgICBsZXQgdGltZVRvTGl2ZSA9IERFRkFVTFRfVFRMO1xuICAgIGxldCBleHRyYUhlYWRlcnMgPSB7fTtcbiAgICBsZXQgY29udGVudEVuY29kaW5nID0gd2ViUHVzaENvbnN0YW50cy5zdXBwb3J0ZWRDb250ZW50RW5jb2RpbmdzLkFFU18xMjhfR0NNO1xuICAgIGxldCB1cmdlbmN5ID0gd2ViUHVzaENvbnN0YW50cy5zdXBwb3J0ZWRVcmdlbmN5Lk5PUk1BTDtcbiAgICBsZXQgdG9waWM7XG4gICAgbGV0IHByb3h5O1xuICAgIGxldCBhZ2VudDtcbiAgICBsZXQgdGltZW91dDtcblxuICAgIGlmIChvcHRpb25zKSB7XG4gICAgICBjb25zdCB2YWxpZE9wdGlvbktleXMgPSBbXG4gICAgICAgICdoZWFkZXJzJyxcbiAgICAgICAgJ2djbUFQSUtleScsXG4gICAgICAgICd2YXBpZERldGFpbHMnLFxuICAgICAgICAnVFRMJyxcbiAgICAgICAgJ2NvbnRlbnRFbmNvZGluZycsXG4gICAgICAgICd1cmdlbmN5JyxcbiAgICAgICAgJ3RvcGljJyxcbiAgICAgICAgJ3Byb3h5JyxcbiAgICAgICAgJ2FnZW50JyxcbiAgICAgICAgJ3RpbWVvdXQnXG4gICAgICBdO1xuICAgICAgY29uc3Qgb3B0aW9uS2V5cyA9IE9iamVjdC5rZXlzKG9wdGlvbnMpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcHRpb25LZXlzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbktleSA9IG9wdGlvbktleXNbaV07XG4gICAgICAgIGlmICghdmFsaWRPcHRpb25LZXlzLmluY2x1ZGVzKG9wdGlvbktleSkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1xcJycgKyBvcHRpb25LZXkgKyAnXFwnIGlzIGFuIGludmFsaWQgb3B0aW9uLiAnXG4gICAgICAgICAgKyAnVGhlIHZhbGlkIG9wdGlvbnMgYXJlIFtcXCcnICsgdmFsaWRPcHRpb25LZXlzLmpvaW4oJ1xcJywgXFwnJylcbiAgICAgICAgICArICdcXCddLicpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25zLmhlYWRlcnMpIHtcbiAgICAgICAgZXh0cmFIZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xuICAgICAgICBsZXQgZHVwbGljYXRlcyA9IE9iamVjdC5rZXlzKGV4dHJhSGVhZGVycylcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGhlYWRlcikge1xuICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIG9wdGlvbnNbaGVhZGVyXSAhPT0gJ3VuZGVmaW5lZCc7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBpZiAoZHVwbGljYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEdXBsaWNhdGVkIGhlYWRlcnMgZGVmaW5lZCBbJ1xuICAgICAgICAgICsgZHVwbGljYXRlcy5qb2luKCcsJykgKyAnXS4gUGxlYXNlIGVpdGhlciBkZWZpbmUgdGhlIGhlYWRlciBpbiB0aGUnXG4gICAgICAgICAgKyAndG9wIGxldmVsIG9wdGlvbnMgT1IgaW4gdGhlIFxcJ2hlYWRlcnNcXCcga2V5LicpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25zLmdjbUFQSUtleSkge1xuICAgICAgICBjdXJyZW50R0NNQVBJS2V5ID0gb3B0aW9ucy5nY21BUElLZXk7XG4gICAgICB9XG5cbiAgICAgIC8vIEZhbHN5IHZhbHVlcyBhcmUgYWxsb3dlZCBoZXJlIHNvIG9uZSBjYW4gc2tpcCBWYXBpZCBgZWxzZSBpZmAgYmVsb3cgYW5kIHVzZSBGQ01cbiAgICAgIGlmIChvcHRpb25zLnZhcGlkRGV0YWlscyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGN1cnJlbnRWYXBpZERldGFpbHMgPSBvcHRpb25zLnZhcGlkRGV0YWlscztcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnMuVFRMICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGltZVRvTGl2ZSA9IE51bWJlcihvcHRpb25zLlRUTCk7XG4gICAgICAgIGlmICh0aW1lVG9MaXZlIDwgMCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVFRMIHNob3VsZCBiZSBhIG51bWJlciBhbmQgc2hvdWxkIGJlIGF0IGxlYXN0IDAnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5jb250ZW50RW5jb2RpbmcpIHtcbiAgICAgICAgaWYgKChvcHRpb25zLmNvbnRlbnRFbmNvZGluZyA9PT0gd2ViUHVzaENvbnN0YW50cy5zdXBwb3J0ZWRDb250ZW50RW5jb2RpbmdzLkFFU18xMjhfR0NNXG4gICAgICAgICAgfHwgb3B0aW9ucy5jb250ZW50RW5jb2RpbmcgPT09IHdlYlB1c2hDb25zdGFudHMuc3VwcG9ydGVkQ29udGVudEVuY29kaW5ncy5BRVNfR0NNKSkge1xuICAgICAgICAgIGNvbnRlbnRFbmNvZGluZyA9IG9wdGlvbnMuY29udGVudEVuY29kaW5nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgY29udGVudCBlbmNvZGluZyBzcGVjaWZpZWQuJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnMudXJnZW5jeSkge1xuICAgICAgICBpZiAoKG9wdGlvbnMudXJnZW5jeSA9PT0gd2ViUHVzaENvbnN0YW50cy5zdXBwb3J0ZWRVcmdlbmN5LlZFUllfTE9XXG4gICAgICAgICAgfHwgb3B0aW9ucy51cmdlbmN5ID09PSB3ZWJQdXNoQ29uc3RhbnRzLnN1cHBvcnRlZFVyZ2VuY3kuTE9XXG4gICAgICAgICAgfHwgb3B0aW9ucy51cmdlbmN5ID09PSB3ZWJQdXNoQ29uc3RhbnRzLnN1cHBvcnRlZFVyZ2VuY3kuTk9STUFMXG4gICAgICAgICAgfHwgb3B0aW9ucy51cmdlbmN5ID09PSB3ZWJQdXNoQ29uc3RhbnRzLnN1cHBvcnRlZFVyZ2VuY3kuSElHSCkpIHtcbiAgICAgICAgICB1cmdlbmN5ID0gb3B0aW9ucy51cmdlbmN5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgdXJnZW5jeSBzcGVjaWZpZWQuJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnMudG9waWMpIHtcbiAgICAgICAgaWYgKCF1cmxCYXNlNjRIZWxwZXIudmFsaWRhdGUob3B0aW9ucy50b3BpYykpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIGNoYXJhY3RlcnMgc2V0IHVzZSB0aGUgVVJMIG9yIGZpbGVuYW1lLXNhZmUgQmFzZTY0IGNoYXJhY3RlcnMgc2V0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMudG9waWMubGVuZ3RoID4gMzIpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZSBtYXhpbXVtIG9mIDMyIGNoYXJhY3RlcnMgZnJvbSB0aGUgVVJMIG9yIGZpbGVuYW1lLXNhZmUgQmFzZTY0IGNoYXJhY3RlcnMgc2V0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdG9waWMgPSBvcHRpb25zLnRvcGljO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5wcm94eSkge1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMucHJveHkgPT09ICdzdHJpbmcnXG4gICAgICAgICAgfHwgdHlwZW9mIG9wdGlvbnMucHJveHkuaG9zdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBwcm94eSA9IG9wdGlvbnMucHJveHk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdBdHRlbXB0IHRvIHVzZSBwcm94eSBvcHRpb24sIGJ1dCBpbnZhbGlkIHR5cGUgaXQgc2hvdWxkIGJlIGEgc3RyaW5nIG9yIHByb3h5IG9wdGlvbnMgb2JqZWN0LicpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25zLmFnZW50KSB7XG4gICAgICAgIGlmIChvcHRpb25zLmFnZW50IGluc3RhbmNlb2YgaHR0cHMuQWdlbnQpIHtcbiAgICAgICAgICBpZiAocHJveHkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignQWdlbnQgb3B0aW9uIHdpbGwgYmUgaWdub3JlZCBiZWNhdXNlIHByb3h5IG9wdGlvbiBpcyBkZWZpbmVkLicpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGFnZW50ID0gb3B0aW9ucy5hZ2VudDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1dyb25nIHR5cGUgZm9yIHRoZSBhZ2VudCBvcHRpb24sIGl0IHNob3VsZCBiZSBhbiBpbnN0YW5jZSBvZiBodHRwcy5BZ2VudC4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIG9wdGlvbnMudGltZW91dCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgdGltZW91dCA9IG9wdGlvbnMudGltZW91dDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHRpbWVUb0xpdmUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aW1lVG9MaXZlID0gREVGQVVMVF9UVEw7XG4gICAgfVxuXG4gICAgY29uc3QgcmVxdWVzdERldGFpbHMgPSB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgVFRMOiB0aW1lVG9MaXZlXG4gICAgICB9XG4gICAgfTtcbiAgICBPYmplY3Qua2V5cyhleHRyYUhlYWRlcnMpLmZvckVhY2goZnVuY3Rpb24gKGhlYWRlcikge1xuICAgICAgcmVxdWVzdERldGFpbHMuaGVhZGVyc1toZWFkZXJdID0gZXh0cmFIZWFkZXJzW2hlYWRlcl07XG4gICAgfSk7XG4gICAgbGV0IHJlcXVlc3RQYXlsb2FkID0gbnVsbDtcblxuICAgIGlmIChwYXlsb2FkKSB7XG4gICAgICBjb25zdCBlbmNyeXB0ZWQgPSBlbmNyeXB0aW9uSGVscGVyXG4gICAgICAgIC5lbmNyeXB0KHN1YnNjcmlwdGlvbi5rZXlzLnAyNTZkaCwgc3Vic2NyaXB0aW9uLmtleXMuYXV0aCwgcGF5bG9hZCwgY29udGVudEVuY29kaW5nKTtcblxuICAgICAgcmVxdWVzdERldGFpbHMuaGVhZGVyc1snQ29udGVudC1MZW5ndGgnXSA9IGVuY3J5cHRlZC5jaXBoZXJUZXh0Lmxlbmd0aDtcbiAgICAgIHJlcXVlc3REZXRhaWxzLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSc7XG5cbiAgICAgIGlmIChjb250ZW50RW5jb2RpbmcgPT09IHdlYlB1c2hDb25zdGFudHMuc3VwcG9ydGVkQ29udGVudEVuY29kaW5ncy5BRVNfMTI4X0dDTSkge1xuICAgICAgICByZXF1ZXN0RGV0YWlscy5oZWFkZXJzWydDb250ZW50LUVuY29kaW5nJ10gPSB3ZWJQdXNoQ29uc3RhbnRzLnN1cHBvcnRlZENvbnRlbnRFbmNvZGluZ3MuQUVTXzEyOF9HQ007XG4gICAgICB9IGVsc2UgaWYgKGNvbnRlbnRFbmNvZGluZyA9PT0gd2ViUHVzaENvbnN0YW50cy5zdXBwb3J0ZWRDb250ZW50RW5jb2RpbmdzLkFFU19HQ00pIHtcbiAgICAgICAgcmVxdWVzdERldGFpbHMuaGVhZGVyc1snQ29udGVudC1FbmNvZGluZyddID0gd2ViUHVzaENvbnN0YW50cy5zdXBwb3J0ZWRDb250ZW50RW5jb2RpbmdzLkFFU19HQ007XG4gICAgICAgIHJlcXVlc3REZXRhaWxzLmhlYWRlcnMuRW5jcnlwdGlvbiA9ICdzYWx0PScgKyBlbmNyeXB0ZWQuc2FsdDtcbiAgICAgICAgcmVxdWVzdERldGFpbHMuaGVhZGVyc1snQ3J5cHRvLUtleSddID0gJ2RoPScgKyBlbmNyeXB0ZWQubG9jYWxQdWJsaWNLZXkudG9TdHJpbmcoJ2Jhc2U2NHVybCcpO1xuICAgICAgfVxuXG4gICAgICByZXF1ZXN0UGF5bG9hZCA9IGVuY3J5cHRlZC5jaXBoZXJUZXh0O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXF1ZXN0RGV0YWlscy5oZWFkZXJzWydDb250ZW50LUxlbmd0aCddID0gMDtcbiAgICB9XG5cbiAgICBjb25zdCBpc0dDTSA9IHN1YnNjcmlwdGlvbi5lbmRwb2ludC5zdGFydHNXaXRoKCdodHRwczovL2FuZHJvaWQuZ29vZ2xlYXBpcy5jb20vZ2NtL3NlbmQnKTtcbiAgICBjb25zdCBpc0ZDTSA9IHN1YnNjcmlwdGlvbi5lbmRwb2ludC5zdGFydHNXaXRoKCdodHRwczovL2ZjbS5nb29nbGVhcGlzLmNvbS9mY20vc2VuZCcpO1xuICAgIC8vIFZBUElEIGlzbid0IHN1cHBvcnRlZCBieSBHQ00gaGVuY2UgdGhlIGlmLCBlbHNlIGlmLlxuICAgIGlmIChpc0dDTSkge1xuICAgICAgaWYgKCFjdXJyZW50R0NNQVBJS2V5KSB7XG4gICAgICAgIGNvbnNvbGUud2FybignQXR0ZW1wdCB0byBzZW5kIHB1c2ggbm90aWZpY2F0aW9uIHRvIEdDTSBlbmRwb2ludCwgJ1xuICAgICAgICArICdidXQgbm8gR0NNIGtleSBpcyBkZWZpbmVkLiBQbGVhc2UgdXNlIHNldEdDTUFwaUtleSgpIG9yIGFkZCAnXG4gICAgICAgICsgJ1xcJ2djbUFQSUtleVxcJyBhcyBhbiBvcHRpb24uJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXF1ZXN0RGV0YWlscy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSAna2V5PScgKyBjdXJyZW50R0NNQVBJS2V5O1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoY3VycmVudFZhcGlkRGV0YWlscykge1xuICAgICAgY29uc3QgcGFyc2VkVXJsID0gdXJsLnBhcnNlKHN1YnNjcmlwdGlvbi5lbmRwb2ludCk7XG4gICAgICBjb25zdCBhdWRpZW5jZSA9IHBhcnNlZFVybC5wcm90b2NvbCArICcvLydcbiAgICAgICsgcGFyc2VkVXJsLmhvc3Q7XG5cbiAgICAgIGNvbnN0IHZhcGlkSGVhZGVycyA9IHZhcGlkSGVscGVyLmdldFZhcGlkSGVhZGVycyhcbiAgICAgICAgYXVkaWVuY2UsXG4gICAgICAgIGN1cnJlbnRWYXBpZERldGFpbHMuc3ViamVjdCxcbiAgICAgICAgY3VycmVudFZhcGlkRGV0YWlscy5wdWJsaWNLZXksXG4gICAgICAgIGN1cnJlbnRWYXBpZERldGFpbHMucHJpdmF0ZUtleSxcbiAgICAgICAgY29udGVudEVuY29kaW5nXG4gICAgICApO1xuXG4gICAgICByZXF1ZXN0RGV0YWlscy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSB2YXBpZEhlYWRlcnMuQXV0aG9yaXphdGlvbjtcblxuICAgICAgaWYgKGNvbnRlbnRFbmNvZGluZyA9PT0gd2ViUHVzaENvbnN0YW50cy5zdXBwb3J0ZWRDb250ZW50RW5jb2RpbmdzLkFFU19HQ00pIHtcbiAgICAgICAgaWYgKHJlcXVlc3REZXRhaWxzLmhlYWRlcnNbJ0NyeXB0by1LZXknXSkge1xuICAgICAgICAgIHJlcXVlc3REZXRhaWxzLmhlYWRlcnNbJ0NyeXB0by1LZXknXSArPSAnOydcbiAgICAgICAgICArIHZhcGlkSGVhZGVyc1snQ3J5cHRvLUtleSddO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlcXVlc3REZXRhaWxzLmhlYWRlcnNbJ0NyeXB0by1LZXknXSA9IHZhcGlkSGVhZGVyc1snQ3J5cHRvLUtleSddO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc0ZDTSAmJiBjdXJyZW50R0NNQVBJS2V5KSB7XG4gICAgICByZXF1ZXN0RGV0YWlscy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSAna2V5PScgKyBjdXJyZW50R0NNQVBJS2V5O1xuICAgIH1cblxuICAgIHJlcXVlc3REZXRhaWxzLmhlYWRlcnMuVXJnZW5jeSA9IHVyZ2VuY3k7XG5cbiAgICBpZiAodG9waWMpIHtcbiAgICAgIHJlcXVlc3REZXRhaWxzLmhlYWRlcnMuVG9waWMgPSB0b3BpYztcbiAgICB9XG5cbiAgICByZXF1ZXN0RGV0YWlscy5ib2R5ID0gcmVxdWVzdFBheWxvYWQ7XG4gICAgcmVxdWVzdERldGFpbHMuZW5kcG9pbnQgPSBzdWJzY3JpcHRpb24uZW5kcG9pbnQ7XG5cbiAgICBpZiAocHJveHkpIHtcbiAgICAgIHJlcXVlc3REZXRhaWxzLnByb3h5ID0gcHJveHk7XG4gICAgfVxuXG4gICAgaWYgKGFnZW50KSB7XG4gICAgICByZXF1ZXN0RGV0YWlscy5hZ2VudCA9IGFnZW50O1xuICAgIH1cblxuICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICByZXF1ZXN0RGV0YWlscy50aW1lb3V0ID0gdGltZW91dDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVxdWVzdERldGFpbHM7XG4gIH07XG5cbi8qKlxuICogVG8gc2VuZCBhIHB1c2ggbm90aWZpY2F0aW9uIGNhbGwgdGhpcyBtZXRob2Qgd2l0aCBhIHN1YnNjcmlwdGlvbiwgb3B0aW9uYWxcbiAqIHBheWxvYWQgYW5kIGFueSBvcHRpb25zLlxuICogQHBhcmFtICB7UHVzaFN1YnNjcmlwdGlvbn0gc3Vic2NyaXB0aW9uIFRoZSBQdXNoU3Vic2NyaXB0aW9uIHlvdSB3aXNoIHRvXG4gKiBzZW5kIHRoZSBub3RpZmljYXRpb24gdG8uXG4gKiBAcGFyYW0gIHtzdHJpbmd8QnVmZmVyfSBbcGF5bG9hZF0gICAgICAgVGhlIHBheWxvYWQgeW91IHdpc2ggdG8gc2VuZCB0byB0aGVcbiAqIHRoZSB1c2VyLlxuICogQHBhcmFtICB7T2JqZWN0fSBbb3B0aW9uc10gICAgICAgICAgICAgIE9wdGlvbnMgZm9yIHRoZSBHQ00gQVBJIGtleSBhbmRcbiAqIHZhcGlkIGtleXMgY2FuIGJlIHBhc3NlZCBpbiBpZiB0aGV5IGFyZSB1bmlxdWUgZm9yIGVhY2ggbm90aWZpY2F0aW9uIHlvdVxuICogd2lzaCB0byBzZW5kLlxuICogQHJldHVybiB7UHJvbWlzZX0gICAgICAgICAgICAgICAgICAgICAgIFRoaXMgbWV0aG9kIHJldHVybnMgYSBQcm9taXNlIHdoaWNoXG4gKiByZXNvbHZlcyBpZiB0aGUgc2VuZGluZyBvZiB0aGUgbm90aWZpY2F0aW9uIHdhcyBzdWNjZXNzZnVsLCBvdGhlcndpc2UgaXRcbiAqIHJlamVjdHMuXG4gKi9cbldlYlB1c2hMaWIucHJvdG90eXBlLnNlbmROb3RpZmljYXRpb24gPSBmdW5jdGlvbihzdWJzY3JpcHRpb24sIHBheWxvYWQsIG9wdGlvbnMpIHtcbiAgICBsZXQgcmVxdWVzdERldGFpbHM7XG4gICAgdHJ5IHtcbiAgICAgIHJlcXVlc3REZXRhaWxzID0gdGhpcy5nZW5lcmF0ZVJlcXVlc3REZXRhaWxzKHN1YnNjcmlwdGlvbiwgcGF5bG9hZCwgb3B0aW9ucyk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBjb25zdCBodHRwc09wdGlvbnMgPSB7fTtcbiAgICAgIGNvbnN0IHVybFBhcnRzID0gdXJsLnBhcnNlKHJlcXVlc3REZXRhaWxzLmVuZHBvaW50KTtcbiAgICAgIGh0dHBzT3B0aW9ucy5ob3N0bmFtZSA9IHVybFBhcnRzLmhvc3RuYW1lO1xuICAgICAgaHR0cHNPcHRpb25zLnBvcnQgPSB1cmxQYXJ0cy5wb3J0O1xuICAgICAgaHR0cHNPcHRpb25zLnBhdGggPSB1cmxQYXJ0cy5wYXRoO1xuXG4gICAgICBodHRwc09wdGlvbnMuaGVhZGVycyA9IHJlcXVlc3REZXRhaWxzLmhlYWRlcnM7XG4gICAgICBodHRwc09wdGlvbnMubWV0aG9kID0gcmVxdWVzdERldGFpbHMubWV0aG9kO1xuXG4gICAgICBpZiAocmVxdWVzdERldGFpbHMudGltZW91dCkge1xuICAgICAgICBodHRwc09wdGlvbnMudGltZW91dCA9IHJlcXVlc3REZXRhaWxzLnRpbWVvdXQ7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZXF1ZXN0RGV0YWlscy5hZ2VudCkge1xuICAgICAgICBodHRwc09wdGlvbnMuYWdlbnQgPSByZXF1ZXN0RGV0YWlscy5hZ2VudDtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlcXVlc3REZXRhaWxzLnByb3h5KSB7XG4gICAgICAgIGNvbnN0IHsgSHR0cHNQcm94eUFnZW50IH0gPSByZXF1aXJlKCdodHRwcy1wcm94eS1hZ2VudCcpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGdsb2JhbC1yZXF1aXJlXG4gICAgICAgIGh0dHBzT3B0aW9ucy5hZ2VudCA9IG5ldyBIdHRwc1Byb3h5QWdlbnQocmVxdWVzdERldGFpbHMucHJveHkpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwdXNoUmVxdWVzdCA9IGh0dHBzLnJlcXVlc3QoaHR0cHNPcHRpb25zLCBmdW5jdGlvbihwdXNoUmVzcG9uc2UpIHtcbiAgICAgICAgbGV0IHJlc3BvbnNlVGV4dCA9ICcnO1xuXG4gICAgICAgIHB1c2hSZXNwb25zZS5vbignZGF0YScsIGZ1bmN0aW9uKGNodW5rKSB7XG4gICAgICAgICAgcmVzcG9uc2VUZXh0ICs9IGNodW5rO1xuICAgICAgICB9KTtcblxuICAgICAgICBwdXNoUmVzcG9uc2Uub24oJ2VuZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmIChwdXNoUmVzcG9uc2Uuc3RhdHVzQ29kZSA8IDIwMCB8fCBwdXNoUmVzcG9uc2Uuc3RhdHVzQ29kZSA+IDI5OSkge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBXZWJQdXNoRXJyb3IoXG4gICAgICAgICAgICAgICdSZWNlaXZlZCB1bmV4cGVjdGVkIHJlc3BvbnNlIGNvZGUnLFxuICAgICAgICAgICAgICBwdXNoUmVzcG9uc2Uuc3RhdHVzQ29kZSxcbiAgICAgICAgICAgICAgcHVzaFJlc3BvbnNlLmhlYWRlcnMsXG4gICAgICAgICAgICAgIHJlc3BvbnNlVGV4dCxcbiAgICAgICAgICAgICAgcmVxdWVzdERldGFpbHMuZW5kcG9pbnRcbiAgICAgICAgICAgICkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICAgICAgc3RhdHVzQ29kZTogcHVzaFJlc3BvbnNlLnN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgIGJvZHk6IHJlc3BvbnNlVGV4dCxcbiAgICAgICAgICAgICAgaGVhZGVyczogcHVzaFJlc3BvbnNlLmhlYWRlcnNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlcXVlc3REZXRhaWxzLnRpbWVvdXQpIHtcbiAgICAgICAgcHVzaFJlcXVlc3Qub24oJ3RpbWVvdXQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBwdXNoUmVxdWVzdC5kZXN0cm95KG5ldyBFcnJvcignU29ja2V0IHRpbWVvdXQnKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBwdXNoUmVxdWVzdC5vbignZXJyb3InLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVxdWVzdERldGFpbHMuYm9keSkge1xuICAgICAgICBwdXNoUmVxdWVzdC53cml0ZShyZXF1ZXN0RGV0YWlscy5ib2R5KTtcbiAgICAgIH1cblxuICAgICAgcHVzaFJlcXVlc3QuZW5kKCk7XG4gICAgfSk7XG4gIH07XG5cbm1vZHVsZS5leHBvcnRzID0gV2ViUHVzaExpYjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/web-push/src/web-push-lib.js\n");

/***/ })

};
;